---
import ComponentLayout from '../../layouts/ComponentLayout.astro';
import Example from '../../components/Example.astro';
import { Code } from 'astro:components';
import {
  BasicDemo,
  SizesDemo,
  ColorsDemo,
  IconDemo,
  ErrorLevelDemo,
  BorderDemo,
  LoadingDemo,
  ExpiredDemo,
  DynamicDemo,
} from '../../components/QRCodeDemo';
import QRCodeDemoSource from '../../components/QRCodeDemo.tsx?raw';

const api = [
  { property: 'value', description: 'The value to encode in the QR code', type: 'string', default: '-' },
  { property: 'size', description: 'QR code canvas size in pixels', type: 'number', default: '160' },
  { property: 'errorLevel', description: 'Error correction level', type: "'L' | 'M' | 'Q' | 'H'", default: "'M'" },
  { property: 'icon', description: 'URL of icon/logo to display in center', type: 'string', default: '-' },
  { property: 'iconSize', description: 'Size of the center icon in pixels', type: 'number', default: '40' },
  { property: 'type', description: 'Render type', type: "'canvas' | 'svg'", default: "'canvas'" },
  { property: 'color', description: 'Foreground color (QR code color)', type: 'string', default: "'#000000'" },
  { property: 'bgColor', description: 'Background color', type: 'string', default: "'#FFFFFF'" },
  { property: 'bordered', description: 'Show border around QR code', type: 'boolean', default: 'true' },
  { property: 'status', description: 'QR code status state', type: "'active' | 'loading' | 'expired'", default: "'active'" },
  { property: 'onRefresh', description: 'Callback when refresh button is clicked (expired status)', type: '() => void', default: '-' },
  { property: 'className', description: 'Additional CSS classes', type: 'string', default: '-' },
];
---

<ComponentLayout
  name="QRCode"
  description="Generate QR codes with customizable appearance, icons, and status states."
  importCode="import { QRCode } from 'asterui/qrcode'"
  api={api}
>
  <section slot="installation" class="mb-8">
    <h2 class="text-2xl font-bold mb-4">Installation</h2>
    <p class="text-base-content/80 mb-4">This component requires <code class="bg-base-content/20 px-1 rounded">qrcode</code> as a peer dependency:</p>
    <div class="border border-base-300 rounded-lg overflow-hidden [&_pre]:!m-0 [&_pre]:!rounded-none">
      <Code code="npm install qrcode" lang="bash" themes={{ light: 'github-light', dark: 'github-dark' }} defaultColor={false} />
    </div>
  </section>

  <Example title="Basic QR Code" description="Simple QR code with default settings." source={QRCodeDemoSource} fn="BasicDemo">
    <BasicDemo client:only="react" slot="demo" />
  </Example>

  <Example title="Custom Size" description="Different QR code sizes." source={QRCodeDemoSource} fn="SizesDemo">
    <SizesDemo client:only="react" slot="demo" />
  </Example>

  <Example title="Custom Colors" description="Customize foreground and background colors." source={QRCodeDemoSource} fn="ColorsDemo">
    <ColorsDemo client:only="react" slot="demo" />
  </Example>

  <Example title="With Icon" description="QR code with centered logo/icon." source={QRCodeDemoSource} fn="IconDemo">
    <IconDemo client:only="react" slot="demo" />
  </Example>

  <Example title="Error Correction Level" description="Different error correction levels affect QR code density." source={QRCodeDemoSource} fn="ErrorLevelDemo">
    <ErrorLevelDemo client:only="react" slot="demo" />
  </Example>

  <Example title="Without Border" description="Remove the border for seamless integration." source={QRCodeDemoSource} fn="BorderDemo">
    <BorderDemo client:only="react" slot="demo" />
  </Example>

  <Example title="Loading Status" description="Show loading state while generating or fetching QR code data." source={QRCodeDemoSource} fn="LoadingDemo">
    <LoadingDemo client:only="react" slot="demo" />
  </Example>

  <Example title="Expired Status" description="Show expired state with optional refresh functionality." source={QRCodeDemoSource} fn="ExpiredDemo">
    <ExpiredDemo client:only="react" slot="demo" />
  </Example>

  <Example title="Dynamic QR Code" description="Update QR code value dynamically." source={QRCodeDemoSource} fn="DynamicDemo">
    <DynamicDemo client:only="react" slot="demo" />
  </Example>

  <section slot="accessibility" class="mb-8">
    <h2 class="text-2xl font-bold mb-4">Accessibility</h2>
    <ul class="list-disc list-inside space-y-2 text-base-content/80">
      <li>QR codes include <code class="bg-base-content/20 px-1 rounded">role="img"</code> with descriptive label</li>
      <li>Loading and expired states are announced to screen readers</li>
      <li>Refresh button is keyboard accessible</li>
    </ul>
  </section>
</ComponentLayout>
