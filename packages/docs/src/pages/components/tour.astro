---
import ComponentLayout from '../../layouts/ComponentLayout.astro';
import Example from '../../components/Example.astro';
import {
  BasicTourDemo,
  WithoutTargetDemo,
  WithCoverDemo,
  PlacementsDemo,
} from '../../components/TourDemo';
import TourDemoSource from '../../components/TourDemo.tsx?raw';

const api = [
  { title: 'Tour', data: [
    { property: 'open', description: 'Whether tour is visible', type: 'boolean', default: 'false' },
    { property: 'steps', description: 'Tour steps configuration', type: 'TourStepProps[]', default: '-' },
    { property: 'current', description: 'Current step index (controlled)', type: 'number', default: '-' },
    { property: 'onChange', description: 'Callback when step changes', type: '(current: number) => void', default: '-' },
    { property: 'onClose', description: 'Callback when tour closes', type: '() => void', default: '-' },
    { property: 'onFinish', description: 'Callback when tour finishes', type: '() => void', default: '-' },
    { property: 'mask', description: 'Show mask overlay with spotlight', type: 'boolean', default: 'true' },
    { property: 'type', description: 'Button style type', type: "'default' | 'primary'", default: "'default'" },
    { property: 'gap', description: 'Gap between spotlight and target [radius, offset] or number', type: 'number | [number, number]', default: '8' },
    { property: 'showSkip', description: 'Show skip button', type: 'boolean', default: 'true' },
    { property: 'showIndicators', description: 'Show step indicators', type: 'boolean', default: 'true' },
    { property: 'closeOnMaskClick', description: 'Close on mask click', type: 'boolean', default: 'true' },
    { property: 'closeOnEscape', description: 'Close on Escape key', type: 'boolean', default: 'true' },
    { property: 'scrollIntoView', description: 'Scroll target into view', type: 'boolean', default: 'true' },
    { property: 'prevButtonText', description: 'Text for previous button', type: 'React.ReactNode', default: "'Previous'" },
    { property: 'nextButtonText', description: 'Text for next button', type: 'React.ReactNode', default: "'Next'" },
    { property: 'finishButtonText', description: 'Text for finish button', type: 'React.ReactNode', default: "'Finish'" },
    { property: 'skipButtonText', description: 'Text for skip button', type: 'React.ReactNode', default: "'Skip'" },
    { property: 'zIndex', description: 'Z-index for tour overlay', type: 'number', default: '1000' },
  ]},
  { title: 'TourStepProps', data: [
    { property: 'target', description: 'Target element ref or function returning element', type: 'RefObject<HTMLElement> | (() => HTMLElement | null) | null', default: '-' },
    { property: 'title', description: 'Step title', type: 'React.ReactNode', default: '-' },
    { property: 'description', description: 'Step description', type: 'React.ReactNode', default: '-' },
    { property: 'cover', description: 'Cover image or content above title', type: 'React.ReactNode', default: '-' },
    { property: 'placement', description: 'Popover placement relative to target', type: 'TourPlacement', default: "'bottom'" },
    { property: 'className', description: 'Custom class for step popover', type: 'string', default: '-' },
    { property: 'onOpen', description: 'Called when step becomes active', type: '() => void', default: '-' },
    { property: 'onClose', description: 'Called when leaving step', type: '() => void', default: '-' },
  ]},
];
---

<ComponentLayout
  name="Tour"
  description="Guided tour with spotlight highlighting and step navigation."
  api={api}
>
  <Example title="Basic Tour" description="A simple guided tour with multiple steps." source={TourDemoSource} fn="BasicTourDemo">
    <BasicTourDemo client:load slot="demo" />
  </Example>

  <Example title="Tour Without Target" description="Steps without a target appear centered on screen." source={TourDemoSource} fn="WithoutTargetDemo">
    <WithoutTargetDemo client:load slot="demo" />
  </Example>

  <Example title="With Cover Image" description="Add images or custom content above the step title." source={TourDemoSource} fn="WithCoverDemo">
    <WithCoverDemo client:load slot="demo" />
  </Example>

  <Example title="Placements" description="Control where the popover appears relative to the target." source={TourDemoSource} fn="PlacementsDemo">
    <PlacementsDemo client:load slot="demo" />
  </Example>

  <section slot="accessibility" class="mb-8">
    <h2 class="text-2xl font-bold mb-4">Accessibility</h2>
    <ul class="list-disc list-inside space-y-2 text-base-content/80">
      <li>Tour dialog has role="dialog" and aria-modal="true"</li>
      <li>Arrow keys navigate between steps</li>
      <li>Escape key closes the tour</li>
      <li>Step indicators are keyboard accessible</li>
      <li>Focus is trapped within the tour when open</li>
    </ul>
  </section>
</ComponentLayout>
