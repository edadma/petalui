---
import ComponentLayout from '../../layouts/ComponentLayout.astro';
import Example from '../../components/Example.astro';
import {
  BasicDemo,
  FourDigitDemo,
  SizesDemo,
  MaskedDemo,
  AlphanumericDemo,
  ErrorDemo,
  DisabledDemo,
} from '../../components/OTPInputDemo';
import OTPInputDemoSource from '../../components/OTPInputDemo.tsx?raw';

const api = [
  { property: 'length', description: 'Number of input fields', type: 'number', default: '6' },
  { property: 'value', description: 'Current value', type: 'string', default: '-' },
  { property: 'onChange', description: 'Callback when value changes', type: '(value: string) => void', default: '-' },
  { property: 'onComplete', description: 'Callback when all fields are filled', type: '(value: string) => void', default: '-' },
  { property: 'size', description: 'Input size', type: "'xs' | 'sm' | 'md' | 'lg' | 'xl'", default: "'md'" },
  { property: 'type', description: 'Input type - number only or alphanumeric', type: "'number' | 'text'", default: "'number'" },
  { property: 'mask', description: 'Mask input (show dots instead of characters)', type: 'boolean', default: 'false' },
  { property: 'disabled', description: 'Disabled state', type: 'boolean', default: 'false' },
  { property: 'error', description: 'Error state', type: 'boolean', default: 'false' },
  { property: 'autoFocus', description: 'Auto focus first input on mount', type: 'boolean', default: 'false' },
  { property: 'placeholder', description: 'Placeholder character', type: 'string', default: '-' },
  { property: 'className', description: 'Additional CSS classes', type: 'string', default: '-' },
];

const refApi = [
  { property: 'focus', description: 'Focus the first input', type: '() => void', default: '-' },
  { property: 'clear', description: 'Clear all inputs and focus first', type: '() => void', default: '-' },
];
---

<ComponentLayout
  name="OTPInput"
  description="One-time password input with auto-focus and paste support."
  api={api}
  refApi={refApi}
>
  <Example title="Basic OTP Input" description="Simple 6-digit OTP input." source={OTPInputDemoSource} fn="BasicDemo">
    <BasicDemo client:load slot="demo" />
  </Example>

  <Example title="Four Digit" description="Custom length OTP input." source={OTPInputDemoSource} fn="FourDigitDemo">
    <FourDigitDemo client:load slot="demo" />
  </Example>

  <Example title="Sizes" description="Different size variants." source={OTPInputDemoSource} fn="SizesDemo">
    <SizesDemo client:load slot="demo" />
  </Example>

  <Example title="Masked Input" description="Hide entered values with dots." source={OTPInputDemoSource} fn="MaskedDemo">
    <MaskedDemo client:load slot="demo" />
  </Example>

  <Example title="Alphanumeric" description="Accept both letters and numbers." source={OTPInputDemoSource} fn="AlphanumericDemo">
    <AlphanumericDemo client:load slot="demo" />
  </Example>

  <Example title="Error State" description="Show error styling for invalid input." source={OTPInputDemoSource} fn="ErrorDemo">
    <ErrorDemo client:load slot="demo" />
  </Example>

  <Example title="Disabled State" description="Non-interactive disabled input." source={OTPInputDemoSource} fn="DisabledDemo">
    <DisabledDemo client:load slot="demo" />
  </Example>

  <section slot="accessibility" class="mb-8">
    <h2 class="text-2xl font-bold mb-4">Accessibility</h2>
    <ul class="list-disc list-inside space-y-2 text-base-content/80">
      <li>Each input has an aria-label indicating its position</li>
      <li>Supports keyboard navigation with arrow keys</li>
      <li>Backspace moves focus to previous input</li>
      <li>Supports pasting full OTP codes</li>
    </ul>
  </section>
</ComponentLayout>
