---
import ComponentLayout from '../../layouts/ComponentLayout.astro';
import Example from '../../components/Example.astro';
import {
  BasicDemo,
  ItemsPropDemo,
  PositionDemo,
  TriggerDemo,
  WithIconsDemo,
  WithDividerDemo,
  ItemStatesDemo,
  AlignDemo,
  ContextMenuDemo,
  SubmenuDemo,
} from '../../components/DropdownDemo';
import DropdownDemoSource from '../../components/DropdownDemo.tsx?raw';

const api = [
  { title: 'Dropdown', data: [
    { property: 'children', description: 'Trigger element and dropdown content (compound pattern)', type: 'React.ReactNode' },
    { property: 'items', description: 'Menu items (data-driven pattern)', type: 'DropdownMenuItemType[]' },
    { property: 'trigger', description: 'Trigger mode(s) for dropdown', type: "('click' | 'hover' | 'contextMenu')[]", default: "['click']" },
    { property: 'position', description: 'Dropdown menu position', type: "'top' | 'bottom' | 'left' | 'right'", default: "'bottom'" },
    { property: 'align', description: 'Dropdown menu alignment', type: "'start' | 'center' | 'end'", default: "'start'" },
    { property: 'open', description: 'Controlled open state', type: 'boolean' },
    { property: 'onOpenChange', description: 'Callback when open state changes', type: '(open: boolean, info?: { source }) => void' },
    { property: 'disabled', description: 'Disable the dropdown', type: 'boolean', default: 'false' },
    { property: 'arrow', description: 'Show arrow pointing to trigger', type: 'boolean | { pointAtCenter?: boolean }', default: 'false' },
    { property: 'mouseEnterDelay', description: 'Delay before showing on hover (seconds)', type: 'number', default: '0.15' },
    { property: 'mouseLeaveDelay', description: 'Delay before hiding on mouse leave (seconds)', type: 'number', default: '0.1' },
    { property: 'destroyOnHidden', description: 'Destroy dropdown when hidden', type: 'boolean', default: 'false' },
    { property: 'className', description: 'Additional CSS classes', type: 'string' },
  ]},
  { title: 'Dropdown.Item', data: [
    { property: 'key', description: 'Unique key for the item (React key prop)', type: 'string' },
    { property: 'children', description: 'Item content', type: 'React.ReactNode' },
    { property: 'label', description: 'Item label (alternative to children)', type: 'React.ReactNode' },
    { property: 'icon', description: 'Icon to display before label', type: 'React.ReactNode' },
    { property: 'onClick', description: 'Click handler', type: '() => void' },
    { property: 'active', description: 'Active/selected state', type: 'boolean', default: 'false' },
    { property: 'disabled', description: 'Disable the item', type: 'boolean', default: 'false' },
    { property: 'danger', description: 'Danger/destructive styling', type: 'boolean', default: 'false' },
    { property: 'className', description: 'Additional CSS classes', type: 'string' },
  ]},
  { title: 'Dropdown.SubMenu', data: [
    { property: 'key', description: 'Unique key for the submenu (React key prop)', type: 'string', default: '-' },
    { property: 'children', description: 'Submenu items', type: 'React.ReactNode', default: '-' },
    { property: 'title', description: 'Submenu title/label', type: 'React.ReactNode', default: '-' },
    { property: 'icon', description: 'Icon to display before title', type: 'React.ReactNode', default: '-' },
    { property: 'disabled', description: 'Disable the submenu', type: 'boolean', default: 'false' },
  ]},
];
---

<ComponentLayout
  name="Dropdown"
  description="Dropdown menu component for displaying actions and options."
  api={api}
>
  <Example title="Basic Dropdown" description="Simple dropdown menu with items using compound pattern." source={DropdownDemoSource} fn="BasicDemo">
    <BasicDemo client:load slot="demo" />
  </Example>

  <Example title="Data-Driven (items prop)" description="Define menu items via the items prop instead of compound components." source={DropdownDemoSource} fn="ItemsPropDemo">
    <ItemsPropDemo client:load slot="demo" />
  </Example>

  <Example title="Position" description="Dropdown menu can be positioned in different directions." source={DropdownDemoSource} fn="PositionDemo">
    <PositionDemo client:load slot="demo" />
  </Example>

  <Example title="Trigger Modes" description="Control how the dropdown opens: click, hover, or both." source={DropdownDemoSource} fn="TriggerDemo">
    <TriggerDemo client:load slot="demo" />
  </Example>

  <Example title="With Icons" description="Menu items with icons for better visual context." source={DropdownDemoSource} fn="WithIconsDemo">
    <WithIconsDemo client:load slot="demo" />
  </Example>

  <Example title="With Divider" description="Separate menu sections with dividers." source={DropdownDemoSource} fn="WithDividerDemo">
    <WithDividerDemo client:load slot="demo" />
  </Example>

  <Example title="Item States" description="Items can be active, disabled, or styled as danger." source={DropdownDemoSource} fn="ItemStatesDemo">
    <ItemStatesDemo client:load slot="demo" />
  </Example>

  <Example title="Alignment" description="Align the dropdown menu to start, center, or end." source={DropdownDemoSource} fn="AlignDemo">
    <AlignDemo client:load slot="demo" />
  </Example>

  <Example title="Context Menu" description="Open dropdown on right-click using contextMenu trigger." source={DropdownDemoSource} fn="ContextMenuDemo">
    <ContextMenuDemo client:load slot="demo" />
  </Example>

  <Example title="With Submenu" description="Nested submenus for hierarchical options." source={DropdownDemoSource} fn="SubmenuDemo">
    <SubmenuDemo client:load slot="demo" />
  </Example>

  <section slot="accessibility" class="mb-8">
    <h2 class="text-2xl font-bold mb-4">Accessibility</h2>
    <ul class="list-disc list-inside space-y-2 text-base-content/80">
      <li>Keyboard navigation with <code class="bg-base-content/20 px-1 rounded">Enter</code>, <code class="bg-base-content/20 px-1 rounded">Space</code>, and <code class="bg-base-content/20 px-1 rounded">Escape</code> keys</li>
      <li>Arrow keys to navigate through menu items</li>
      <li>Proper ARIA attributes for screen readers</li>
      <li>Focus management when opening and closing the menu</li>
      <li>Click outside to close behavior</li>
    </ul>
  </section>
</ComponentLayout>
