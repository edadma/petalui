---
import ComponentLayout from '../../layouts/ComponentLayout.astro';
import Example from '../../components/Example.astro';
import {
  BasicDemo,
  DefaultFooterDemo,
  CustomFooterDemo,
  StaticMethodsDemo,
  ConfirmDemo,
  CenteredDemo,
  SizesDemo,
  ResponsiveDemo,
} from '../../components/ModalDemo';
import ModalDemoSource from '../../components/ModalDemo.tsx?raw';

const api = [
  {
    title: 'Modal',
    data: [
      { property: 'open', description: 'Controlled open state', type: 'boolean', default: 'false' },
      { property: 'title', description: 'Modal title', type: 'React.ReactNode', default: '-' },
      { property: 'children', description: 'Modal content', type: 'React.ReactNode', default: '-' },
      { property: 'footer', description: 'Custom footer content (set to null to hide)', type: 'React.ReactNode', default: '-' },
      { property: 'onOk', description: 'OK button click handler (shows default footer)', type: '() => void | Promise<void>', default: '-' },
      { property: 'onCancel', description: 'Cancel button click handler', type: '() => void', default: '-' },
      { property: 'onClose', description: 'Close handler (alias for onCancel)', type: '() => void', default: '-' },
      { property: 'okText', description: 'OK button text', type: 'string', default: "'OK'" },
      { property: 'cancelText', description: 'Cancel button text', type: 'string', default: "'Cancel'" },
      { property: 'width', description: 'Modal width', type: 'number | string', default: '-' },
      { property: 'centered', description: 'Vertically center modal', type: 'boolean', default: 'false' },
      { property: 'position', description: 'Modal position (supports responsive object)', type: "'top' | 'middle' | 'bottom' | { base?, sm?, md?, lg?, xl?, '2xl'? }", default: '-' },
      { property: 'align', description: 'Modal alignment', type: "'start' | 'end'", default: '-' },
      { property: 'maskClosable', description: 'Close on backdrop click', type: 'boolean', default: 'true' },
      { property: 'closable', description: 'Show close backdrop', type: 'boolean', default: 'true' },
      { property: 'className', description: 'Additional CSS classes', type: 'string', default: '-' },
    ]
  },
  {
    title: 'Modal.info/success/warning/error/confirm',
    data: [
      { property: 'title', description: 'Modal title', type: 'React.ReactNode', default: '-' },
      { property: 'content', description: 'Modal content', type: 'React.ReactNode', default: '-' },
      { property: 'onOk', description: 'OK button click handler', type: '() => void | Promise<void>', default: '-' },
      { property: 'onCancel', description: 'Cancel button click handler (confirm only)', type: '() => void', default: '-' },
      { property: 'okText', description: 'OK button text', type: 'string', default: "'OK'" },
      { property: 'cancelText', description: 'Cancel button text (confirm only)', type: 'string', default: "'Cancel'" },
      { property: 'type', description: 'Modal type for styling', type: "'info' | 'success' | 'warning' | 'error'", default: '-' },
    ]
  }
];
---

<ComponentLayout
  name="Modal"
  description="Dialog overlay for user interaction and displaying information."
  api={api}
>
  <Example title="Basic Modal" description="Simple modal with open/close functionality." source={ModalDemoSource} fn="BasicDemo">
    <BasicDemo client:load slot="demo" />
  </Example>

  <Example title="Default Footer" description="Modal with built-in OK/Cancel buttons using onOk and onCancel props." source={ModalDemoSource} fn="DefaultFooterDemo">
    <DefaultFooterDemo client:load slot="demo" />
  </Example>

  <Example title="Custom Footer" description="Modal with custom footer buttons." source={ModalDemoSource} fn="CustomFooterDemo">
    <CustomFooterDemo client:load slot="demo" />
  </Example>

  <Example title="Static Methods" description="Quick dialogs using Modal.info, Modal.success, Modal.warning, and Modal.error." source={ModalDemoSource} fn="StaticMethodsDemo">
    <StaticMethodsDemo client:load slot="demo" />
  </Example>

  <Example title="Confirm Dialog" description="Confirmation dialog with OK and Cancel buttons using Modal.confirm." source={ModalDemoSource} fn="ConfirmDemo">
    <ConfirmDemo client:load slot="demo" />
  </Example>

  <Example title="Centered Modal" description="Vertically centered modal." source={ModalDemoSource} fn="CenteredDemo">
    <CenteredDemo client:load slot="demo" />
  </Example>

  <Example title="Modal Sizes" description="Different modal widths." source={ModalDemoSource} fn="SizesDemo">
    <SizesDemo client:load slot="demo" />
  </Example>

  <Example title="Responsive Position" description="Modal position can change based on screen size using responsive position object." source={ModalDemoSource} fn="ResponsiveDemo">
    <ResponsiveDemo client:load slot="demo" />
  </Example>

  <div slot="api-notes" class="mb-6">
    <h3 class="text-lg font-semibold mb-2">Static Methods</h3>
    <ul class="list-disc list-inside space-y-1 text-base-content/80">
      <li><code class="bg-base-content/20 px-1 rounded">Modal.info(config)</code> - Information dialog</li>
      <li><code class="bg-base-content/20 px-1 rounded">Modal.success(config)</code> - Success dialog</li>
      <li><code class="bg-base-content/20 px-1 rounded">Modal.warning(config)</code> - Warning dialog</li>
      <li><code class="bg-base-content/20 px-1 rounded">Modal.error(config)</code> - Error dialog</li>
      <li><code class="bg-base-content/20 px-1 rounded">Modal.confirm(config)</code> - Confirmation dialog with OK/Cancel</li>
    </ul>
  </div>

  <section slot="accessibility" class="mb-8">
    <h2 class="text-2xl font-bold mb-4">Accessibility</h2>
    <ul class="list-disc list-inside space-y-2 text-base-content/80">
      <li>Uses native <code class="bg-base-content/20 px-1 rounded">&lt;dialog&gt;</code> element for proper modal behavior</li>
      <li>Focus is trapped within the modal when open</li>
      <li>Pressing Escape closes the modal</li>
      <li>Focus is restored to the trigger element when closed</li>
      <li>Uses <code class="bg-base-content/20 px-1 rounded">aria-labelledby</code> and <code class="bg-base-content/20 px-1 rounded">aria-describedby</code> for screen readers</li>
    </ul>
  </section>
</ComponentLayout>
