---
import ComponentLayout from '../../layouts/ComponentLayout.astro';
import Example from '../../components/Example.astro';
import {
  BasicDemo,
  DescriptionDemo,
  PlacementsDemo,
  CustomTextDemo,
  AsyncDemo,
  CustomIconDemo,
  NoCancelDemo,
  DisabledDemo,
} from '../../components/PopconfirmDemo';
import PopconfirmDemoSource from '../../components/PopconfirmDemo.tsx?raw';

const api = [
  { property: 'children', description: 'Trigger element', type: 'React.ReactElement', default: '-' },
  { property: 'title', description: 'Title of the confirmation', type: 'React.ReactNode', default: '-' },
  { property: 'description', description: 'Description text', type: 'React.ReactNode', default: '-' },
  { property: 'onConfirm', description: 'Callback when confirmed (supports async)', type: '() => void | Promise<void>', default: '-' },
  { property: 'onCancel', description: 'Callback when cancelled', type: '() => void', default: '-' },
  { property: 'okText', description: 'Text for confirm button', type: 'string', default: "'OK'" },
  { property: 'cancelText', description: 'Text for cancel button', type: 'string', default: "'Cancel'" },
  { property: 'okType', description: 'Button type for confirm button', type: "'primary' | 'secondary' | 'accent' | 'success' | 'warning' | 'error' | 'info'", default: "'primary'" },
  { property: 'cancelType', description: 'Button type for cancel button', type: "'primary' | 'secondary' | 'accent' | 'success' | 'warning' | 'error' | 'info' | 'ghost'", default: "'ghost'" },
  { property: 'placement', description: 'Placement of the confirmation popup', type: "'top' | 'bottom' | 'left' | 'right'", default: "'top'" },
  { property: 'disabled', description: 'Whether the popconfirm is disabled', type: 'boolean', default: 'false' },
  { property: 'icon', description: 'Custom icon (null to hide default)', type: 'React.ReactNode', default: '-' },
  { property: 'showCancel', description: 'Show cancel button', type: 'boolean', default: 'true' },
];
---

<ComponentLayout
  name="Popconfirm"
  description="A simple confirmation dialog triggered by a click action."
  api={api}
>
  <Example title="Basic" description="Simple popconfirm with title." source={PopconfirmDemoSource} fn="BasicDemo">
    <BasicDemo client:load slot="demo" />
  </Example>

  <Example title="With Description" description="Add a description for more context." source={PopconfirmDemoSource} fn="DescriptionDemo">
    <DescriptionDemo client:load slot="demo" />
  </Example>

  <Example title="Placements" description="Popconfirm can be placed in different positions." source={PopconfirmDemoSource} fn="PlacementsDemo">
    <PlacementsDemo client:load slot="demo" />
  </Example>

  <Example title="Custom Text" description="Customize button text and types." source={PopconfirmDemoSource} fn="CustomTextDemo">
    <CustomTextDemo client:load slot="demo" />
  </Example>

  <Example title="Async Confirm" description="Handle async operations with loading state." source={PopconfirmDemoSource} fn="AsyncDemo">
    <AsyncDemo client:load slot="demo" />
  </Example>

  <Example title="Custom Icon" description="Customize or hide the icon." source={PopconfirmDemoSource} fn="CustomIconDemo">
    <CustomIconDemo client:load slot="demo" />
  </Example>

  <Example title="No Cancel Button" description="Hide the cancel button for acknowledgment-only confirmations." source={PopconfirmDemoSource} fn="NoCancelDemo">
    <NoCancelDemo client:load slot="demo" />
  </Example>

  <Example title="Disabled" description="Disabled popconfirm." source={PopconfirmDemoSource} fn="DisabledDemo">
    <DisabledDemo client:load slot="demo" />
  </Example>

  <section slot="accessibility" class="mb-8">
    <h2 class="text-2xl font-bold mb-4">Accessibility</h2>
    <ul class="list-disc list-inside space-y-2 text-base-content/80">
      <li>Focus is trapped within the popconfirm when open</li>
      <li>Escape key closes the popconfirm</li>
      <li>Buttons are keyboard accessible</li>
      <li>Loading state is communicated via <code class="bg-base-content/20 px-1 rounded">aria-busy</code></li>
    </ul>
  </section>
</ComponentLayout>
