---
import ComponentLayout from '../../layouts/ComponentLayout.astro';
import Example from '../../components/Example.astro';
import {
  BasicDemo,
  DataDrivenDemo,
  IconsDemo,
  DividersDemo,
  SubmenuDemo,
  DisabledDemo,
} from '../../components/ContextMenuDemo';
import ContextMenuDemoSource from '../../components/ContextMenuDemo.tsx?raw';

const api = [
  { title: 'ContextMenu', data: [
    { property: 'children', description: 'Element that triggers the context menu on right-click', type: 'React.ReactNode', default: '-' },
    { property: 'items', description: 'Menu items', type: 'ContextMenuItem[]', default: '-' },
    { property: 'onSelect', description: 'Callback when an item is selected', type: '(key: string) => void', default: '-' },
    { property: 'disabled', description: 'Whether the context menu is disabled', type: 'boolean', default: 'false' },
    { property: 'className', description: 'Additional CSS classes for the menu', type: 'string', default: '-' },
  ]},
  { title: 'ContextMenuItem (for items prop)', data: [
    { property: 'key', description: 'Unique identifier for the item', type: 'string', default: '-' },
    { property: 'label', description: 'Display label', type: 'React.ReactNode', default: '-' },
    { property: 'icon', description: 'Icon element', type: 'React.ReactNode', default: '-' },
    { property: 'disabled', description: 'Disabled state', type: 'boolean', default: 'false' },
    { property: 'danger', description: 'Show as danger/destructive action', type: 'boolean', default: 'false' },
    { property: 'divider', description: 'Render as a divider', type: 'boolean', default: 'false' },
    { property: 'children', description: 'Submenu items', type: 'ContextMenuItem[]', default: '-' },
  ]},
  { title: 'ContextMenu.Item (compound pattern)', data: [
    { property: 'key', description: 'Unique key for the item (React key prop)', type: 'string', default: '-' },
    { property: 'children', description: 'Item content', type: 'React.ReactNode', default: '-' },
    { property: 'icon', description: 'Icon to display before label', type: 'React.ReactNode', default: '-' },
    { property: 'disabled', description: 'Whether the item is disabled', type: 'boolean', default: 'false' },
    { property: 'danger', description: 'Show as danger/destructive action', type: 'boolean', default: 'false' },
  ]},
  { title: 'ContextMenu.SubMenu (compound pattern)', data: [
    { property: 'key', description: 'Unique key for the submenu (React key prop)', type: 'string', default: '-' },
    { property: 'label', description: 'Submenu label', type: 'React.ReactNode', default: '-' },
    { property: 'icon', description: 'Icon to display before label', type: 'React.ReactNode', default: '-' },
    { property: 'disabled', description: 'Whether the submenu is disabled', type: 'boolean', default: 'false' },
    { property: 'children', description: 'Submenu items', type: 'React.ReactNode', default: '-' },
  ]},
];
---

<ComponentLayout
  name="ContextMenu"
  description="Right-click context menu with nested submenus and icons."
  api={api}
>
  <Example title="Basic Context Menu" description="Right-click on the element to show the menu." source={ContextMenuDemoSource} fn="BasicDemo">
    <BasicDemo client:load slot="demo" />
  </Example>

  <Example title="Data-Driven Pattern" description="Use items prop for data-driven menus." source={ContextMenuDemoSource} fn="DataDrivenDemo">
    <DataDrivenDemo client:load slot="demo" />
  </Example>

  <Example title="With Icons" description="Menu items with icons." source={ContextMenuDemoSource} fn="IconsDemo">
    <IconsDemo client:load slot="demo" />
  </Example>

  <Example title="With Dividers" description="Separate menu sections with dividers." source={ContextMenuDemoSource} fn="DividersDemo">
    <DividersDemo client:load slot="demo" />
  </Example>

  <Example title="Nested Submenu" description="Menu items with nested submenus." source={ContextMenuDemoSource} fn="SubmenuDemo">
    <SubmenuDemo client:load slot="demo" />
  </Example>

  <Example title="Disabled Items" description="Some menu items can be disabled." source={ContextMenuDemoSource} fn="DisabledDemo">
    <DisabledDemo client:load slot="demo" />
  </Example>

  <section slot="accessibility" class="mb-8">
    <h2 class="text-2xl font-bold mb-4">Accessibility</h2>
    <ul class="list-disc list-inside space-y-2 text-base-content/80">
      <li>Menu closes on Escape key press</li>
      <li>Menu closes when clicking outside</li>
      <li>Menu items are keyboard navigable</li>
      <li>Disabled items are properly announced</li>
    </ul>
  </section>
</ComponentLayout>
