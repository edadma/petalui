---
import ComponentLayout from '../../layouts/ComponentLayout.astro';
import Example from '../../components/Example.astro';
import {
  BasicDemo,
  CustomPrefixDemo,
  MultiTriggerDemo,
} from '../../components/MentionDemo';
import MentionDemoSource from '../../components/MentionDemo.tsx?raw';

const api = [
  {
    property: 'options',
    description: 'Array of mention options',
    type: 'Array<{ value: string, label: string }>',
  },
  {
    property: 'value',
    description: 'Controlled value',
    type: 'string',
  },
  {
    property: 'onChange',
    description: 'Callback when value changes',
    type: '(value: string) => void',
  },
  {
    property: 'prefix',
    description: 'Character that triggers mention suggestions',
    type: 'string',
    default: "'@'",
  },
  {
    property: 'split',
    description: 'Character used to split mentions in the input',
    type: 'string',
  },
  {
    property: 'placeholder',
    description: 'Input placeholder text',
    type: 'string',
  },
  {
    property: 'disabled',
    description: 'Disable the mention input',
    type: 'boolean',
    default: 'false',
  },
  {
    property: 'className',
    description: 'Additional CSS classes',
    type: 'string',
  },
];
---

<ComponentLayout
  name="Mention"
  description="Input component for mentioning users, tags, or other entities with autocomplete suggestions."
  api={api}
>
  <Example title="Basic Mention" description="Simple mention input with @ trigger." source={MentionDemoSource} fn="BasicDemo">
    <BasicDemo client:only="react" slot="demo" />
  </Example>

  <Example title="Custom Prefix" description="Using # prefix for hashtag mentions." source={MentionDemoSource} fn="CustomPrefixDemo">
    <CustomPrefixDemo client:only="react" slot="demo" />
  </Example>

  <Example title="Multiple Triggers" description="Using multiple mention components with different prefixes." source={MentionDemoSource} fn="MultiTriggerDemo">
    <MultiTriggerDemo client:only="react" slot="demo" />
  </Example>

  <section slot="accessibility" class="mb-8">
    <h2 class="text-2xl font-bold mb-4">Keyboard Navigation</h2>
    <div class="p-4 bg-info/10 border border-info/20 rounded-lg mb-6">
      <ul class="list-disc list-inside space-y-2 text-base-content/80">
        <li><kbd class="kbd kbd-sm">↑</kbd> / <kbd class="kbd kbd-sm">↓</kbd> - Navigate through mention suggestions</li>
        <li><kbd class="kbd kbd-sm">Enter</kbd> - Select highlighted mention</li>
        <li><kbd class="kbd kbd-sm">Esc</kbd> - Close mention dropdown</li>
      </ul>
    </div>

    <h2 class="text-2xl font-bold mb-4">Accessibility</h2>
    <ul class="list-disc list-inside space-y-2 text-base-content/80">
      <li>Full keyboard navigation support for selecting mentions</li>
      <li>ARIA attributes for screen readers to announce suggestions</li>
      <li>Focus management when dropdown opens and closes</li>
      <li>Clear visual indicators for selected and focused items</li>
    </ul>
  </section>
</ComponentLayout>
