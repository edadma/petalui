---
import ComponentLayout from '../../layouts/ComponentLayout.astro';
import Example from '../../components/Example.astro';
import {
  BasicDemo,
  VerticalDemo,
  HorizontalDemo,
  CompactDemo,
  SnapIconDemo,
  ColorsDemo,
  ModeStartDemo,
  ModeEndDemo,
  PendingDemo,
  LoadingDemo,
  ReverseDemo,
  DeclarativeDemo,
} from '../../components/TimelineDemo';
import TimelineDemoSource from '../../components/TimelineDemo.tsx?raw';

const api = [
  { property: 'children', description: 'Timeline items (compound pattern)', type: 'React.ReactNode', default: '-' },
  { property: 'items', description: 'Timeline items (declarative API)', type: 'TimelineItemConfig[]', default: '-' },
  { property: 'vertical', description: 'Vertical layout orientation', type: 'boolean', default: 'false' },
  { property: 'horizontal', description: 'Horizontal layout (default)', type: 'boolean', default: 'false' },
  { property: 'compact', description: 'All items on one side', type: 'boolean', default: 'false' },
  { property: 'snapIcon', description: 'Snap icon to start instead of center', type: 'boolean', default: 'false' },
  { property: 'mode', description: 'Item distribution layout', type: "'start' | 'alternate' | 'end'", default: "'alternate'" },
  { property: 'reverse', description: 'Reverse item order', type: 'boolean', default: 'false' },
  { property: 'pending', description: 'Show pending/loading indicator at end', type: 'React.ReactNode', default: '-' },
  { property: 'pendingIcon', description: 'Custom icon for pending item', type: 'React.ReactNode', default: '-' },
  { property: 'data-testid', description: 'Test ID for the component', type: 'string', default: "'timeline'" },
  { property: 'aria-label', description: 'Accessible label for the timeline', type: 'string', default: '-' },
  { property: 'className', description: 'Additional CSS classes', type: 'string', default: '-' },
];

const timelineItemApi = [
  { property: 'start', description: 'Content at start position (left/top)', type: 'React.ReactNode', default: '-' },
  { property: 'end', description: 'Content at end position (right/bottom)', type: 'React.ReactNode', default: '-' },
  { property: 'icon', description: 'Central icon or marker', type: 'React.ReactNode', default: '-' },
  { property: 'startBox', description: 'Wrap start content in timeline-box', type: 'boolean', default: 'false' },
  { property: 'endBox', description: 'Wrap end content in timeline-box', type: 'boolean', default: 'false' },
  { property: 'color', description: 'Color of the timeline dot/connector', type: "'primary' | 'secondary' | 'accent' | 'info' | 'success' | 'warning' | 'error' | 'neutral'", default: '-' },
  { property: 'loading', description: 'Show loading spinner instead of icon', type: 'boolean', default: 'false' },
  { property: 'data-testid', description: 'Test ID for this item', type: 'string', default: '-' },
  { property: 'className', description: 'Additional CSS classes', type: 'string', default: '-' },
];

const timelineItemConfigApi = [
  { property: 'key', description: 'Unique key for the item', type: 'React.Key', default: '-' },
  { property: 'start', description: 'Content at start position', type: 'React.ReactNode', default: '-' },
  { property: 'end', description: 'Content at end position', type: 'React.ReactNode', default: '-' },
  { property: 'icon', description: 'Central icon or marker', type: 'React.ReactNode', default: '-' },
  { property: 'startBox', description: 'Wrap start content in timeline-box', type: 'boolean', default: 'false' },
  { property: 'endBox', description: 'Wrap end content in timeline-box', type: 'boolean', default: 'false' },
  { property: 'color', description: 'Color of the timeline dot/connector', type: 'TimelineColor', default: '-' },
  { property: 'loading', description: 'Show loading spinner', type: 'boolean', default: 'false' },
  { property: 'className', description: 'Additional CSS classes', type: 'string', default: '-' },
];
---

<ComponentLayout
  name="Timeline"
  description="Display events in chronological order with alternating or vertical layouts."
  api={api}
>
  <Example title="Basic Timeline" description="Simple timeline with alternating content." source={TimelineDemoSource} fn="BasicDemo">
    <BasicDemo client:load slot="demo" />
  </Example>

  <Example title="Vertical Timeline" description="Stack items vertically." source={TimelineDemoSource} fn="VerticalDemo">
    <VerticalDemo client:load slot="demo" />
  </Example>

  <Example title="Horizontal Timeline" description="Display items horizontally." source={TimelineDemoSource} fn="HorizontalDemo">
    <HorizontalDemo client:load slot="demo" />
  </Example>

  <Example title="Compact Timeline" description="All content on one side." source={TimelineDemoSource} fn="CompactDemo">
    <CompactDemo client:load slot="demo" />
  </Example>

  <Example title="Snap Icon" description="Snap icons to the start instead of center." source={TimelineDemoSource} fn="SnapIconDemo">
    <SnapIconDemo client:load slot="demo" />
  </Example>

  <Example title="Colors" description="Apply different colors to timeline items." source={TimelineDemoSource} fn="ColorsDemo">
    <ColorsDemo client:load slot="demo" />
  </Example>

  <Example title="Mode: Start" description="All items aligned to start." source={TimelineDemoSource} fn="ModeStartDemo">
    <ModeStartDemo client:load slot="demo" />
  </Example>

  <Example title="Mode: End" description="All items aligned to end." source={TimelineDemoSource} fn="ModeEndDemo">
    <ModeEndDemo client:load slot="demo" />
  </Example>

  <Example title="Pending State" description="Show an ongoing activity at the end." source={TimelineDemoSource} fn="PendingDemo">
    <PendingDemo client:load slot="demo" />
  </Example>

  <Example title="Loading State" description="Show loading spinner on individual items." source={TimelineDemoSource} fn="LoadingDemo">
    <LoadingDemo client:load slot="demo" />
  </Example>

  <Example title="Reverse Order" description="Reverse the order of timeline items." source={TimelineDemoSource} fn="ReverseDemo">
    <ReverseDemo client:load slot="demo" />
  </Example>

  <Example title="Declarative API" description="Use the items prop for data-driven timelines." source={TimelineDemoSource} fn="DeclarativeDemo">
    <DeclarativeDemo client:load slot="demo" />
  </Example>

  <section slot="accessibility" class="mb-8">
    <h2 class="text-2xl font-bold mb-4">Accessibility</h2>
    <ul class="list-disc list-inside space-y-2 text-base-content/80">
      <li>Uses semantic list structure (<code class="bg-base-content/20 px-1 rounded">role="list"</code>) for screen readers</li>
      <li>Timeline items are announced in order</li>
      <li>Supports <code class="bg-base-content/20 px-1 rounded">aria-label</code> for describing the timeline purpose</li>
      <li>Connectors are decorative and hidden from assistive technology</li>
      <li>Loading states include visual spinner indicators</li>
    </ul>
  </section>

  <section slot="additional-api" class="mb-12">
    <h2 class="text-2xl font-bold mb-6">Additional API</h2>
    <div class="space-y-8">
      <div>
        <h3 class="text-xl font-semibold mb-4">Timeline.Item</h3>
        <div class="overflow-x-auto">
          <table class="table">
            <thead>
              <tr>
                <th>Property</th>
                <th>Description</th>
                <th>Type</th>
                <th>Default</th>
              </tr>
            </thead>
            <tbody>
              {timelineItemApi.map((item) => (
                <tr>
                  <td><code class="bg-base-content/20 px-1 rounded">{item.property}</code></td>
                  <td>{item.description}</td>
                  <td><code class="bg-base-content/20 px-1 rounded text-xs">{item.type}</code></td>
                  <td><code class="bg-base-content/20 px-1 rounded text-xs">{item.default}</code></td>
                </tr>
              ))}
            </tbody>
          </table>
        </div>
      </div>

      <div>
        <h3 class="text-xl font-semibold mb-4">TimelineItemConfig</h3>
        <div class="overflow-x-auto">
          <table class="table">
            <thead>
              <tr>
                <th>Property</th>
                <th>Description</th>
                <th>Type</th>
                <th>Default</th>
              </tr>
            </thead>
            <tbody>
              {timelineItemConfigApi.map((item) => (
                <tr>
                  <td><code class="bg-base-content/20 px-1 rounded">{item.property}</code></td>
                  <td>{item.description}</td>
                  <td><code class="bg-base-content/20 px-1 rounded text-xs">{item.type}</code></td>
                  <td><code class="bg-base-content/20 px-1 rounded text-xs">{item.default}</code></td>
                </tr>
              ))}
            </tbody>
          </table>
        </div>
      </div>
    </div>
  </section>
</ComponentLayout>
