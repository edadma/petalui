---
import ComponentLayout from '../../layouts/ComponentLayout.astro';
import Example from '../../components/Example.astro';
import {
  BasicDemo,
  SettingsDemo,
  BoxDemo,
  LiftDemo,
  SizesDemo,
  DisabledDemo,
  DataDrivenDemo,
  PositionDemo,
} from '../../components/TabsDemo';
import TabsDemoSource from '../../components/TabsDemo.tsx?raw';

const api = [
  { property: 'children', description: 'Tab panels (compound pattern)', type: 'React.ReactNode', default: '-' },
  { property: 'items', description: 'Tab items (data-driven pattern)', type: 'TabItem[]', default: '-' },
  { property: 'activeKey', description: 'Current active tab key (controlled)', type: 'string', default: '-' },
  { property: 'defaultActiveKey', description: 'Default active tab key (uncontrolled)', type: 'string', default: '-' },
  { property: 'onChange', description: 'Callback when tab changes', type: '(key: string) => void', default: '-' },
  { property: 'variant', description: 'Visual style variant', type: "'box' | 'border' | 'lift'", default: '-' },
  { property: 'size', description: 'Tab size', type: "'xs' | 'sm' | 'md' | 'lg' | 'xl'", default: '-' },
  { property: 'position', description: 'Tab position relative to content', type: "'top' | 'bottom'", default: "'top'" },
  { property: 'className', description: 'Additional CSS classes', type: 'string', default: '-' },
];

const tabItemApi = [
  { property: 'key', description: 'Unique identifier', type: 'string', default: '-' },
  { property: 'label', description: 'Tab button label', type: 'React.ReactNode', default: '-' },
  { property: 'children', description: 'Tab panel content', type: 'React.ReactNode', default: '-' },
  { property: 'disabled', description: 'Disable the tab', type: 'boolean', default: 'false' },
  { property: 'icon', description: 'Tab icon', type: 'React.ReactNode', default: '-' },
];

const tabPanelApi = [
  { property: 'key', description: 'Unique identifier for the tab (React key prop)', type: 'string', default: '-' },
  { property: 'tab', description: 'Tab button label', type: 'React.ReactNode', default: '-' },
  { property: 'disabled', description: 'Disable the tab', type: 'boolean', default: 'false' },
  { property: 'icon', description: 'Tab icon', type: 'React.ReactNode', default: '-' },
  { property: 'children', description: 'Tab panel content', type: 'React.ReactNode', default: '-' },
];
---

<ComponentLayout
  name="Tabs"
  description="Organize content into separate views where only one is visible at a time."
  api={api}
>
  <Example title="Basic Usage" description="Simple tabs with content switching handled automatically." source={TabsDemoSource} fn="BasicDemo">
    <BasicDemo client:load slot="demo" />
  </Example>

  <Example title="Settings Page" description="Complete settings page with forms using floating label inputs." source={TabsDemoSource} fn="SettingsDemo">
    <SettingsDemo client:load slot="demo" />
  </Example>

  <Example title="Boxed Variant" description="Tabs with enclosed box styling." source={TabsDemoSource} fn="BoxDemo">
    <BoxDemo client:load slot="demo" />
  </Example>

  <Example title="Lifted Variant" description="Tabs with 3D lifted appearance." source={TabsDemoSource} fn="LiftDemo">
    <LiftDemo client:load slot="demo" />
  </Example>

  <Example title="Different Sizes" description="Tabs in various sizes using Space and Typography components." source={TabsDemoSource} fn="SizesDemo">
    <SizesDemo client:load slot="demo" />
  </Example>

  <Example title="Disabled Tab" description="Disable specific tabs." source={TabsDemoSource} fn="DisabledDemo">
    <DisabledDemo client:load slot="demo" />
  </Example>

  <Example title="Data-Driven Pattern" description="Use items prop for data-driven tabs with icons." source={TabsDemoSource} fn="DataDrivenDemo">
    <DataDrivenDemo client:load slot="demo" />
  </Example>

  <Example title="Bottom Position" description="Tabs positioned below the content." source={TabsDemoSource} fn="PositionDemo">
    <PositionDemo client:load slot="demo" />
  </Example>

  <section slot="accessibility" class="mb-8">
    <h2 class="text-2xl font-bold mb-4">Accessibility</h2>
    <ul class="list-disc list-inside space-y-2 text-base-content/80">
      <li>Uses proper ARIA roles: <code class="bg-base-content/20 px-1 rounded">tablist</code>, <code class="bg-base-content/20 px-1 rounded">tab</code>, and <code class="bg-base-content/20 px-1 rounded">tabpanel</code></li>
      <li>Keyboard navigation: Arrow keys move between tabs, Tab key moves focus into the panel</li>
      <li>Active tab is indicated with <code class="bg-base-content/20 px-1 rounded">aria-selected="true"</code></li>
      <li>Disabled tabs use <code class="bg-base-content/20 px-1 rounded">aria-disabled</code> for proper communication</li>
      <li>Tab panels use <code class="bg-base-content/20 px-1 rounded">aria-labelledby</code> to associate with their tab</li>
    </ul>
  </section>

  <section slot="additional-api" class="mb-12">
    <h2 class="text-2xl font-bold mb-6">Additional API</h2>
    <div class="space-y-8">
      <div>
        <h3 class="text-xl font-semibold mb-4">TabItem (for items prop)</h3>
        <div class="overflow-x-auto">
          <table class="table">
            <thead>
              <tr>
                <th>Property</th>
                <th>Description</th>
                <th>Type</th>
                <th>Default</th>
              </tr>
            </thead>
            <tbody>
              {tabItemApi.map((item) => (
                <tr>
                  <td><code class="bg-base-content/20 px-1 rounded">{item.property}</code></td>
                  <td>{item.description}</td>
                  <td><code class="bg-base-content/20 px-1 rounded text-xs">{item.type}</code></td>
                  <td><code class="bg-base-content/20 px-1 rounded text-xs">{item.default}</code></td>
                </tr>
              ))}
            </tbody>
          </table>
        </div>
      </div>

      <div>
        <h3 class="text-xl font-semibold mb-4">Tabs.Panel (compound pattern)</h3>
        <div class="overflow-x-auto">
          <table class="table">
            <thead>
              <tr>
                <th>Property</th>
                <th>Description</th>
                <th>Type</th>
                <th>Default</th>
              </tr>
            </thead>
            <tbody>
              {tabPanelApi.map((item) => (
                <tr>
                  <td><code class="bg-base-content/20 px-1 rounded">{item.property}</code></td>
                  <td>{item.description}</td>
                  <td><code class="bg-base-content/20 px-1 rounded text-xs">{item.type}</code></td>
                  <td><code class="bg-base-content/20 px-1 rounded text-xs">{item.default}</code></td>
                </tr>
              ))}
            </tbody>
          </table>
        </div>
      </div>
    </div>
  </section>

  <section slot="usage-tips" class="mb-8">
    <div class="alert alert-info">
      <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" class="stroke-current shrink-0 w-6 h-6"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"></path></svg>
      <div>
        <strong>Usage Tips:</strong>
        <ul class="list-disc list-inside mt-2 space-y-1">
          <li>Use <code>activeKey</code> for controlled tabs, <code>defaultActiveKey</code> for uncontrolled</li>
          <li>Use <code>items</code> prop for data-driven tabs, <code>Tabs.Panel</code> for compound pattern</li>
          <li>Use <code>position="bottom"</code> to place tabs below content</li>
        </ul>
      </div>
    </div>
  </section>
</ComponentLayout>
